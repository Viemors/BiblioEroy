<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32.png">
  <link rel="stylesheet" href="../css/cadastro-login.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <script defer src="../js/forms.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap');

    body {
      background: #f2f4f7;
      font-family: "Lexend Deca", sans-serif;
    }

    .card {
      border-radius: 15px;
    }

    #button {
      font-family: "Lexend Deca", sans-serif;
    }
  </style>
  <title>Cadastro</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32.png">
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-12">
        <a href="/" class="btn btn-secondary mt-3" id="button">
          <i class="bi bi-arrow-left"></i> Voltar
        </a>
      </div>
    </div>
  </div>


  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6">
        <div class="card shadow p-4">

          <% if (error && error.length) { %>
            <div class="alert alert-danger text-center">
              <% error.forEach(msg => { %>
                <p><%= msg %></p>
              <% }) %>
            </div>
          <% } %>

          <% if (success && success.length) { %>
            <div class="alert alert-success text-center">
              <% success.forEach(msg => { %>
                <p><%= msg %></p>
              <% }) %>
            </div>
          <% } %>

          <h2 class="text-center mb-3">Cadastro</h2>

          <form action="/addCadastro" method="POST">
            <div class="mb-3">
              <label for="nome" class="form-label">Nome Completo</label>
              <input type="text" id="nome" name="nome" class="form-control text-center" placeholder="Digite seu nome" required>
            </div>

            <div class="mb-3">
              <label for="username" class="form-label">Nome de Usuário</label>
              <input type="text" id="username" name="username" class="form-control text-center" placeholder="Digite seu nome de usuário" required>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" name="email" class="form-control text-center" placeholder="Digite seu email" required>
            </div>

            <div class="mb-3">
              <label for="senha" class="form-label">Senha</label>
              <input type="password" id="senha" name="senha_cripto" class="form-control text-center" placeholder="Digite sua senha" minlength="6" required>
            </div>

            <div class="form-check mb-3">
              <input type="checkbox" id="termos" class="form-check-input" required>
              <label for="termos" class="form-check-label">Concordo com os termos e condições.</label>
            </div>

            <div class="mb-3">
              <label class="form-label">Tipo de Conta</label>
              <select id="select" name="tipo_conta" class="form-select text-center">
                <option selected disabled>Selecione um tipo</option>
                <option value="user">Leitor</option>
                <option value="adm">Bibliotecário</option>
              </select>
            </div>

            <div class="mb-3" id="div" hidden>
              <label class="form-label">Senha ADM</label>
              <input type="password" id="senha_adm" name="senha_adm" class="form-control text-center" placeholder="Senha de Acesso">
            </div>

            <button type="submit" class="btn btn-primary w-100 mb-3" id="button">Enviar Cadastro</button>
            <a href="/login" class="btn btn-outline-primary w-100" id="button">Já tenho uma conta</a>
          </form>

        </div>
      </div>
    </div>
  </div>

  <script>
    const select = document.querySelector("#select");
    const div = document.getElementById('div');
    const senha = document.getElementById('senha_adm');

    select.addEventListener("change", () => {
      if (select.value == "adm") {
        div.hidden = false;
        senha.required = true;
      } else {
        div.hidden = true;
        senha.required = false;
      }
    });
  </script>

</body>
</html>
